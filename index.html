<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="pragma" content="no-cache"> 
    <link rel="stylesheet" href="css/main.css">
    <link rel="shortcut icon" href="#">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700&display=swap" rel="stylesheet">
    <title>Augmenta designer (beta)</title>
    <link rel="icon" href="img/augmenta-logo.png" type="image/png">
  </head>

  <body>

    <div class="row full-height">

      <!-- HEADER/VIEWPORT - LEFT -->
      <div id="main">

        <!-- HEADER -->
        <div id="header" class="row s-p">
          <!-- LOGO -->
          <a href="https://www.augmenta.tech">
            <img src="img/augmenta-logo.png" alt="Augmenta">
          </a>

          <!-- TITLE -->
          <div>
            <p id="website-title">Augmenta Designer (beta)</p>
          </div>

          <!-- SHARE BUTTON -->
          <div>
            <div id="generate-link" data-button class="row active">
              <span class="iconify" data-icon="ci:share" style="color: white; padding:4px;"></span>
              <p> Share </p>
            </div>
            <!-- TO ADD HELP BUTTON <p>Help ?</p> -->
          </div>
        </div>

        <!-- SHARE MODAL -->
        <div id="link-modal" class="modal">
          <div id="copy-feedback" class="modal-content link">
              <p id="copy-feedback-text">URL of your scene has been copied to clipboard !</p>
          </div>
        </div>
        <!-- END SHARE MODAL -->

        <!-- VIEWPORT -->
        <div id="viewport">
          <!-- ADD TOOLS 
          <div id="toolbar" class="row">
            <div data-tool="1" class="active">
              <span class="iconify" data-icon="fluent:cursor-20-filled"></span>
            </div>
            <div data-tool="2">
              <span class="iconify" data-icon="fluent:hand-right-16-filled"></span>
            </div>
            <div data-tool="3">
              <span class="iconify" data-icon="fluent:arrow-rotate-clockwise-16-filled"></span>
            </div>
            <div data-tool="4">
              <span class="iconify" data-icon="fluent:zoom-in-16-filled"></span>
            </div>
          </div> -->

          <!-- VIEWPORT BUTTONS -->
          <div id="viewport-button" class="row center">
            <!-- FRUSTUMS BUTTON -->
            <div id="display-frustums-button" data-button class="row active">
              <span class="iconify" data-icon="akar-icons:eye-open" style="color: white; padding:4px;"></span>
              <p id="display-frustums">Frustums</p>
            </div>

            <!-- ADD MEASURES BUTTON
            <div data-button  class="active">
              <p>Measures</p>
            </div> -->

            <!-- UNITS BUTTON -->
            <div id="toggle-unit" class="row active" data-button>
              <span class="iconify" data-icon="codicon:arrow-both" style="color: white; padding: 4px;"></span>
              <p>m / ft</p>
            </div>
          </div>

          <!-- DUMMIES BUTTONS -->
          <div id="dummies-buttons" class="row">

            <!-- ADD BUTTON -->
            <div class="active" data-button>
              <p id="add-dummy">+ Add dummy</p>
            </div>

            <!-- DELETE BUTTON -->
            <div data-button class="row">
              <span class="iconify" data-icon="fluent:delete-16-filled" style="color: #708EB0; padding:4px;"></span>
              <p id="remove-dummies">Remove dummies</p>
            </div>
          </div>
        </div>
      </div>

      <!-- INSPECTOR - RIGHT -->
      <div id="inspector">

        <!-- SCENE PANEL -->
        <div id="scene-info">

          <!-- WIZARD BUTTON -->
          <div id="open-scene-form" class="row active" data-button>
            <span class="iconify" data-icon="fa:magic" style="color: white; padding: 4px;"></span>
            <p >Generate scene</p>
          </div>

          <!-- WIZARD MODAL -->
          <div id="generate-scene-modal" class="modal">
            <div id="scene-form-content" class="modal-content scene-form">
              <span id="close-form" class="close">&times;</span>

              <!-- WIZARD CONTENT -->
              <div>

                <!-- TRACKING SECTION -->
                <div id="tracking-section" class="modal-section">

                  <!-- TRACKING MODE -->
                  <div id="tracking-choice">
                    <h1>What do you want to track ?</h1>
                    <select id="tracking-mode" class="select select-form" name="camType">
                      <option value="human-tracking" selected>Floor (people tracking)</option>
                      <option value="hand-tracking">Table (hand tracking)</option>
                    </select>
                  </div>

                  <!-- HEIGHT DETECTED FOR OVERLAPS -->
                  <div id="height-detection-choice" class="">
                    <p>Target overlap height detection</p>
                    <select id="given-height-detection" class="select select-form" name="camType">
                      <option value="0.2">Feets</option>
                      <option value="0.6">Knees</option>
                      <option value="1" selected>Hips (recommended)</option>
                      <option value="1.6">Shoulders</option>
                      <option id="height-reference" value="2">Entire body</option>
                    </select>
                  </div>
                </div>

                <!-- SCENE SECTION -->
                <div class="modal-section">
                  <h1>Scene size</h1>

                  <!-- WIDTH INPUT -->
                  <div class="inputArea">
                    <p>Width (<span data-unittext="1">m</span>)</p>
                    <input class="" id="areaWantedWidth" type="number" placeholder="w" min="0" max="100" step = "0.1">
                  </div>

                  <!-- HEIGHT INPUT -->
                  <div class="inputArea">
                    <p>Height (<span data-unittext="1">m</span>)</p>
                    <input class="" id="areaWantedHeight" type="number" placeholder="h" min="0" max="100" step = "0.1">
                  </div>

                  <!-- HOOK HEIGHT INPUT -->
                  <div id="hook-height-input" class="inputArea">
                    <p>Camera hook height from scene (<span data-unittext="1">m</span>) </p>
                    <input class="" id="hook-node" type="number" placeholder="r" min="0" max="100" step = "0.1">
                  </div>
                </div>

                <!-- CAMERA TYPES SECTION -->
                <div class="modal-section">
                  <div id="cam-types-checkboxes">
                    <h1>Choose the type.s of camera.s you want to use</h1>
                    <!-- filled in javascript -->
                  </div>
                </div>
              </div>

              <!-- GENERATE SCENE BUTTON -->
              <div id="form-button" class="row active" data-button>
                <span class="iconify" data-icon="fa:magic" style="color: white; padding: 4px;"></span>
                <p id="generate-scene">Generate scene</p>
              </div>
            </div>
          </div>
          <!-- END WIZARD MODAL -->

          <!-- TRACKING SECTION IN INSPECTOR -->
          <div id="tracking-section-inspector">

            <!-- TRACKING MODE -->
            <div id="tracking-choice-inspector">
              <h1>What do you want to track ?</h1>
              <select id="tracking-mode-inspector" class="select select-form" name="camType">
                <option value="human-tracking" selected>Floor (people tracking)</option>
                <option value="hand-tracking">Table (hand tracking)</option>
              </select>
            </div>

            <!-- HEIGHT DETECTED FOR OVERLAPS -->
            <div id="height-detection-choice-inspector" class="">
              <p>Target overlap height detection</p>
              <select id="given-height-detection-inspector" class="select select-form" name="camType">
                <option value="0.2">Feets</option>
                <option value="0.6">Knees</option>
                <option value="1" selected>Hips (recommended)</option>
                <option value="1.6">Shoulders</option>
                <option value="2">Entire body</option>
              </select>
            </div>
          </div>

          <!-- SCENE SECTION IN INSPECTOR -->
          <div>
            <h1>Scene size</h1>

            <!-- WIDTH INPUT -->
            <div  class="inputArea">
              <p>Width (<span data-unittext="1">m</span>)</p>
              <input id="givenSceneWidth" type="number" placeholder="w" min="0" max="100" step = "0.1">
            </div>

            <!-- HEIGHT INPUT -->
            <div  class="inputArea">
              <p>Height (<span data-unittext="1">m</span>)</p>
              <input id="givenSceneHeight" type="number" placeholder="h" min="0" max="100" step = "0.1">
            </div>
          </div>

          <!-- SCENE COVERED FEEDBACK -->
          <div class="row">
            <p>Scene fully covered: </p><span id="covers-check" class="iconify-inline" data-icon="ion:checkmark-circle-sharp" style="color: #2b2;"></span>
          </div>
        </div>

        <!-- SENSORS PANEL -->
        <div id="sensors">

          <!-- NUMBER OF NODES FEEDBACK -->
          <div class="row">
            <p class="number-nodes">Number of nodes: <span id="nb-nodes">0</span></p>
          </div>

          <!-- NODES BUTTONS -->
          <div id="nodes-buttons" class="row">

            <!-- ADD BUTTON -->
            <div id="add-node" class="active" data-button>
              <p>+ New node</p>
            </div>

            <!-- DELETE BUTTON -->
            <div id="remove-nodes" class="row" data-button>
              <span class="iconify" data-icon="fluent:delete-16-filled" style="color: #708EB0; padding:4px;"></span>
              <p>Delete all nodes</p>
            </div>
          </div>
        </div>

        <!-- Beta style management -->
        <script>
          {
            const url = document.location.href;
            if(url.includes('beta'))
            {
              // TITLE
              document.getElementById('website-title').innerHTML += ' (beta)';

              /* DARK MODE */
              // SHARE MODAL
              document.getElementById('copy-feedback').classList.add('dark-mode');
              document.getElementById('copy-feedback-text').classList.add('dark-mode');
            
              // INSPECTOR
              const inspectorChilds = document.getElementById('inspector').getElementsByTagName("*");
              for(let i = 0; i < inspectorChilds.length; i++)
              {
                inspectorChilds[i].classList.add('dark-mode');
              }
              document.getElementById('inspector').classList.add('dark-mode');
            }
          }
        </script>
      </div>
    </div>

  </body>

  <script src="https://code.iconify.design/2/2.1.0/iconify.min.js"></script>
  <!-- Import maps polyfill -->
  <!-- Remove this when import maps will be widely supported -->
  <script type="esms-options">{ "polyfillEnable": ["json-modules"] }</script>
  <script async src="https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js"></script>
  
  <script type="importmap">
    {
      "imports": {
        "three": "https://unpkg.com/three@0.139.2/build/three.module.js",
        "three-libs/": "https://unpkg.com/three@0.139.2/examples/jsm/libs/",
        "three-controls/": "https://unpkg.com/three@0.139.2/examples/jsm/controls/",
        "three-loaders/": "https://unpkg.com/three@0.139.2/examples/jsm/loaders/",
        "three-text-geometry": "https://unpkg.com/three@0.139.2/examples/jsm/geometries/TextGeometry.js",
        "polybool": "https://unpkg.com/polybooljs@1.2.0/dist/polybool.min.js"
      }
    }
  </script> 

  <script type="module" src="js/main.js"></script>
</html>
